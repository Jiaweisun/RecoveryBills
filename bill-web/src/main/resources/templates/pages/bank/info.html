<!DOCTYPE html>
<!--&lt;!&ndash;[if lt IE 7 ]><html xmlns:th="http://www.thymeleaf.org" lang="en" class="no-js ie6"> <![endif]&ndash;&gt;-->
<!--&lt;!&ndash;[if IE 7 ]><html xmlns:th="http://www.thymeleaf.org" lang="en" class="no-js ie7"> <![endif]&ndash;&gt;-->
<!--&lt;!&ndash;[if IE 8 ]><html xmlns:th="http://www.thymeleaf.org" lang="en" class="no-js ie8"> <![endif]&ndash;&gt;-->
<!--&lt;!&ndash;[if IE 9 ]><html xmlns:th="http://www.thymeleaf.org" lang="en" class="no-js ie9"> <![endif]&ndash;&gt;-->
<!--&lt;!&ndash;[if (gt IE 9)|!(IE)]>&lt;!&ndash;><html xmlns:th="http://www.thymeleaf.org" lang="en" class="no-js"-->
                                    <!--xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"-->
                                    <!--layout:decorator="layout"> &lt;!&ndash;<![endif]&ndash;&gt;-->
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout">

<head>
    <title>银行漏单</title>
    </head>


    <body layout:fragment="content">
        <div class="container" style="height: 100%">
            <div>
                <h5 th:inline="text">
                    <form class="search-form" method="POST" action="/bank">
                        <div class="right">

                            <div class="field_select" style="width: 15%">
                                <select class="gradient" name="paymentType" hidefocus="true" style=" background-color: initial;width: 100%;margin-top: 2%;border: groove;font-family: -webkit-pictograph;font-size: x-small;height: 32px;">
                                    <option value="">支付类型</option>
                                    <option value="LONGPAY" th:value="LONGPAY"
                                            th:selected="${condition!=null and condition.paymentType != null and condition.paymentType==paymentType}">龙支付</option>
                                </select>
                            </div>

                            <div class="field_text" style="width:15%">
                                <input type="text" name="totalAmount" placeholder="消费金额" class="gradient" th:value="${condition.totalAmount}"/>
                                <span class="input_icon input_pass"></span>
                            </div>
                            <div class="field_text" style="width:15%">
                                <input type="text" name="payAmount" placeholder="实付金额" class="gradient" th:value="${condition.payAmount}"/>
                                <span class="input_icon input_pass"></span>
                            </div>

                            <div class="input-group date form_date col-md-5" data-date="" data-date-format="yyyy-mm-dd" data-link-field="transDate" data-link-format="yyyy-mm-dd"
                                 style="float: left; width:18%; margin-right: 2%;">
                                <input class="form-control" size="16" type="text" name="transDate" placeholder="交易日期，如：2017-05-22" th:value="${condition.transDate}" readonly="readonly"/>
                                <!--<span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>-->
                                <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                            </div>

                            <div class="input-group date form_time col-md-5" data-date="" data-date-format="hh:ii:ss" data-link-field="dtp_input3" data-link-format="hh:ii:ss"
                                 style="float: left;  width:18%; margin-right: 2%;">
                                <input class="form-control" size="16" type="text" name="transTime" placeholder="交易时间，如：13:00:00" th:value="${condition.transTime}" readonly="readonly"/>
                                <!--<span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>-->
                                <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>
                            </div>
                            <!--<div class="filed_text" style="float: left; width:18%; margin-right: 2%;">-->
                                <!--<input type="text" name="transDate" placeholder="交易日期：2017-05-22" class="gradient" th:value="${condition.transDate}"/>-->
                                <!--<span class="input_icon"></span>-->
                            <!--</div>-->
                            <!--<div class="filed_text" style="float: left;  width:18%; margin-right: 2%;">-->
                                <!--<input type="text" name="transTime" placeholder="交易时间：12:00:00" class="gradient" th:value="${condition.transTime}"/>-->
                                <!--<span class="input_icon"></span>-->
                            <!--</div>-->

                            <div class="field_text" style="width:15%">
                                <input type="text" name="deviceSn" placeholder="设备SN" class="gradient" th:value="${condition.deviceSn}"/>
                                <span class="input_icon"></span>
                            </div>

                            <div class="field_text" style="width:15%">
                                <input type="text" name="cardNumber" placeholder="卡号前6位********后4位" class="gradient" th:value="${condition.cardNumber}"/>
                                <span class="input_icon input_pass"></span>
                            </div>

                            <div class="field_select" style="width: 15%">
                                <select class="gradient" name="agencyId" hidefocus="true" style=" background-color: initial;width: 100%;margin-top: 2%;border: groove;font-family: -webkit-pictograph;font-size: x-small;height: 32px;">
                                    <option value="-1">支付方式</option>
                                    <option th:each="agency : ${agencies}" th:value="${agency.id}" th:text="${agency.name}"
                                            th:selected="${condition!=null and condition.agencyId != null and condition.agencyId==agency.id}">
                                    </option>
                                </select>
                            </div>


                            <!--<div class="field_select" style="width: 18%">-->
                                <!--<select class="gradient" name="status" hidefocus="true" style=" background-color: initial;width: 100%;margin-top: 2%;border: groove;font-family: -webkit-pictograph;font-size: x-small;height: 32px;">-->
                                    <!--<option value="-1">状态</option>-->
                                    <!--<option value="0" th:value="${condition.status}">0</option>-->
                                    <!--<option value="1" th:value="${condition.status}">1</option>-->
                                    <!--<option value="2" th:value="${condition.status}">2</option>-->
                                    <!--<option value="4" th:value="${condition.status}">4</option>-->
                                <!--</select>-->
                            <!--</div>-->

                            <div class="rowSubmit" style="float: right">
                               <span class="btn btn-search">
                                   <input type="submit" value="查询" class="gradient"/>
                               </span>
                            </div>

                        </div>
                    </form>
                </h5>


            </div>

            <div style="margin-top:8%">
            <table class="table table-striped table-bordered" >
                <tr>
                    <!--<td>编号</td>-->
                    <td>交易号</td>
                    <td>SN号</td>
                    <td>交易日期</td>
                    <td>交易时间</td>
                    <td>消费金额</td>
                    <td>实付金额</td>
                    <td>签约扣率</td>
                    <td>手续费</td>
                    <td>支付类型</td>
                    <td>支付方式</td>
                    <td>发卡行</td>
                    <td>卡号</td>
                    <td>创建时间</td>
                    <td>更新时间</td>
                    <td>状态码</td>
                    <td>操作</td>
                </tr>
                <!--<tr th:if="${#lists.isEmpty(transactions)}" th:colspan="16" style=" text-align: center; font-size: x-large; color: brown">-->
                    <!--<td  th:colspan="16" th:rowspan="5" th:text="请选择真实交易数据查询条件查询，谢谢！"></td>-->
                <!--</tr>-->
                <tr th:each="transaction: ${transactions}">
                    <!--<td th:text="${transaction.id}"></td>-->
                    <td th:text="${transaction.transNo}"></td>
                    <td th:text="${transaction.deviceSn}"></td>
                    <td th:if = "${transaction.transDate}" th:text="${#dates.format(transaction.transDate, 'YYYY-MM-dd')}"></td>
                    <td th:if = "${transaction.transDate}==null"></td>
                    <td th:if = "${transaction.transTime}"  th:text="${#dates.format(transaction.transTime, 'HH:mm:ss')} "></td>
                    <td th:if = "${transaction.transTime}==null"></td>
                    <td th:text="${transaction.totalAmount}"></td>
                    <td th:text="${transaction.payAmount}"></td>
                    <td th:text="${transaction.transRate}"></td>
                    <td th:text="${transaction.totalProfit}"></td>
                    <td th:if="${transaction.paymentType}=='WECHAT'" th:text="微信"></td>
                    <td th:if="${transaction.paymentType}=='ALIPAY'" th:text="支付宝"></td>
                    <td th:if="${transaction.paymentType}=='BANK'" th:text="银行卡"></td>
                    <td th:if="${transaction.paymentType}=='BANK_IC'" th:text="IC卡"></td>
                    <td th:if="${transaction.paymentType}=='BANK_QK'" th:text="QK"></td>
                    <td th:if="${transaction.paymentType}=='LONGPAY'" th:text="龙支付"></td>
                    <td th:if="${transaction.agencyId}==1" th:text="信用卡"></td>
                    <td th:if="${transaction.agencyId} !=1" th:text="${transaction.agencyId}"></td>
                    <td th:text="${transaction.bankName}"></td>
                    <td th:text="${transaction.cardNumber}"></td>
                    <td th:text="${#dates.format(transaction.createdAt, 'YYYY-MM-dd HH:mm:ss')} "></td>
                    <td th:if="${transaction.updatedAt}" th:text="${#dates.format(transaction.updatedAt, 'YYYY-MM-dd HH:mm:ss')} "></td>
                    <td th:if="${transaction.updatedAt} == null" th:text="无更新时间"></td>
                    <td th:text="${transaction.status}"></td>
                    <td th:if="${transaction.status}==1 or ${transaction.status}==4" th:text="已更新"></td>
                    <td th:if="${transaction.status}==0">
                        <a th:href="@{/bank/update(transNo=${transaction.transNo})}" class="btn btn-hover active"><span>更新</span></a>
                    </td>
                    <td th:if="${transaction.status}==2 or ${transaction.status}==5" th:text="撤销的原始流水"></td>
                    <td th:if="${transaction.status}==3" th:text="撤销流水"></td>
                </tr>
            </table>
            </div>
            <div style="margin-top: 18%; text-align: center;">
                <label th:if="${#lists.isEmpty(transactions)}" style=" text-align: center; font-size: x-large; color: brown" th:text="请选择真实交易数据查询条件查询，谢谢！">
                </label>
            </div>
        </div>
        <script type="text/javascript">
            $('.form_date').datetimepicker({
                weekStart: 1,
                todayBtn:  1,
                autoclose: 1,
                todayHighlight: 1,
                startView: 2,
                minView: 2,
                forceParse: 0
            });
            $('.form_time').datetimepicker({
                weekStart: 1,
                todayBtn:  1,
                autoclose: 1,
                todayHighlight: 1,
                startView: 1,
                minView: 0,
                maxView: 1,
                forceParse: 0
            });
        </script>
    </body>

    </html>